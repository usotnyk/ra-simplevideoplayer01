<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ES6_Simple Video Player</title>
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript">

        let onReady = (e) => { //fat arrow replaces "function" when declaring new function
            const PI = Math.PI;
            console.log(PI);

            let videoFigureTag = document.getElementById('video_player');
            let videoTag = document.querySelector("#video_player video");
            let sourceTag = document.querySelector("#video_player video source");
            let getAnchors = document.getElementsByTagName("a");

            /*var gethrefAnchors = function(){
                var hrefAnchor = document.getElementsByTagName("a")[0].getAttribute("href");
                for (var i = 0; i < document.getElementsByTagName("a").length; i++) {
                    hrefAnchor = document.getElementsByTagName("a")[i].getAttribute("href");
                console.log(hrefAnchor);
                }

            };*/
            //let getAnchors = document.getElementsByTagName('a');
            let getAllAnchors = document.querySelectorAll("#video_player figcaption a");
            


            console.log(videoFigureTag);
            console.log(videoTag);
            console.log(sourceTag);
            //gethrefAnchors();
            let ai = 5.3434; //any code block (loops, if statements) create their own scope
            for (let ai = 0; ai < getAllAnchors.length; ai++) {
    
                let currentAnchor = getAnchors[ai];
                console.log(ai);
                console.log(currentAnchor);
                currentAnchor.addEventListener("click", onAnchorClick, false);
            }

            console.log("the value of ia is here " + ai);
        }

        function onAnchorClick(e) {
            e.preventDefault(); //removes default behaviour of e (in our case <a>);
            var video = document.querySelector("#video_player video");
            video.removeAttribute("controls");
            video.removeAttribute("poster");

            var currentElement = e.target; //img inside <a>
            var currentLink = e.target.parentElement; //<a>, which is the parent of img
            console.log (currentLink);

            var currentHref = currentLink.getAttribute("href");
            var source = document.querySelectorAll("#video_player video source");
            source[0].src = currentHref; //replacing "src" attribute with currentHref value of new <a>

            video.load(); //method retrieve file
            video.play(); //method to play file
        }

        window.addEventListener("load", onReady, false);

    </script>

</head>
<body>
<h1>Welcome to My Video Player</h1>
<figure id="video_player">
    <video controls poster="./images/nambia1.jpg">
        <source src="./media/nambia1.mp4" type="video/mp4">
        <source src="./media/nambia1.webm" type="video/webm">
    </video>
    <figcaption>
        <a href="./media/nambia1.mp4"><img src="./images/nambia1.jpg" alt="Nambia Timelapse 1"></a>
        <a href="./media/nambia2.mp4"><img src="./images/nambia2.jpg" alt="Nambia Timelapse 2"></a>
        <a href="./media/nambia3.mp4"><img src="./images/nambia3.jpg" alt="Nambia Timelapse 3"></a>
    </figcaption>
</figure>

</body>
</html>